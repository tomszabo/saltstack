I don't believe the logic in this state file is correct.
